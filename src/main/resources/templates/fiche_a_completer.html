<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="fr" xml:lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <script src="/js/jquery-3.2.1.slim.min.js"></script>
    <script src="/js/popper.min.js"></script>
    <link href="/css/bootstrap.min.css" rel="stylesheet" />
    <script src="/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="/css/font-awesome.min.css" />
    <title>Créer une Fiche</title>
    <link rel="icon" type="image/x-icon"
        href="https://upload.wikimedia.org/wikipedia/commons/e/e9/Minsk_Metro_Line_3.png" />
</head>

<body>
    <div class="container">
        <section class="h-100 p-5 text-white bg-dark rounded-3" style="margin-top: calc(var(--bs-gutter-x) * .5);">
            <div class="container">
                <h1 class="display-4">CREER UNE NOUVELLE FICHE D'INTERVENTION
                </h1>
            </div>
        </section>


        <form th:action="@{/ajouter_fiche}" th:object="${fiche}" method="post" id="ficheForm" class="fiche-form">

            <!--------------------------Intervenant--------------------------------------->
         <hr />

         
            <div class="row align-items-center">
               <div class="col-auto">
                  <img class="display-5" src="/images/check.png" alt="Fait" style="height: 1em;" />
               </div>
               <div class="col-auto">
                  <h2 class="display-5" >
                     Intervenant</h2>
               </div>
            </div>
            <div class="titre">Nom de l'intervenant</div>
                    <div class="test">
                        <select id="utilisateur" name="utilisateur.id" th:field="*{utilisateur.id}">
                            <option th:each="user : ${users}" th:value="${user.id}"
                                th:text="${user.nom} + ' ' + ${user.prenom}"></option>
                        </select>
                    </div>



            


            <fieldset>
                <legend>Type d'intervention</legend>
                <div>
                    <div class="test">
                        <div th:each="type : ${T(com.webapp.ytb.webappytp.modele.ElementsFiche.Intervention.TypeIntervention).values()}"
                            class="demi">
                            <input type="radio" id="${type}" name="typeIntervention" th:value="${type}"
                                th:field="${fiche.intervention.typeIntervention}" />
                            <label for="${type}" th:text="${type}"></label>
                        </div>
                    </div>
                </div>
            </fieldset>


            <fieldset>
                <legend>Demande</legend>
                <div>
                    <div class="titre">Nom du demandeur</div>
                    <div class="test">
                        <input type="text" id="nomDemandeur" name="nomDemandeur" th:field="*{demande.nomDemandeur}">
                    </div>
                </div>
                <div class="espaceHor"></div>
                <div>
                    <div class="titre">Date de la demande</div>
                    <div class="test">
                        <input type="date" placeholder="dd-mm-yyyy" id="dateDemande" name="dateDemande"
                            th:field="*{demande.dateDemande}">
                    </div>




                    <div class="titre">Localisation</div>
                    <div class="test">
                        <input type="text" id="localisation" name="localisation" th:field="*{demande.localisation}">
                    </div>
                </div>
                <div class="espaceHor"></div>
                <div class="colonnePrint">
                    <div class="titre demi">Description de la demande</div>
                    <div class="test">
                        <input type="text" id="description" name="description" th:field="*{demande.description}">
                    </div>
                </div>
                <div class="espaceHor"></div>
                <div>
                    <div class="titre demi">Degré d'urgence</div>
                    <div class="test">
                        <input type="number" id="degreUrgence" name="degreUrgence" th:field="*{demande.degreUrgence}">
                    </div>
                </div>
            </fieldset>
            <div class="espaceHor"></div>

            <div class="espaceHor"></div>

            <div class="titre border">NIVEAUX</div>

            <div class="espaceHor"></div>


            <fieldset>
                <legend>Intervention</legend>



                <div>
                    <div class="titre">Date Intervention</div>
                    <div class="test">
                        <select id="NiveauDateIntervention" name="NiveauDateIntervention"
                            th:field="${fiche.intervention.NiveauDateIntervention}">
                            <option value="0">Icone</option>
                            <option value="1">Icone et texte</option>
                            <option value="2">Texte</option>
                        </select>
                    </div>
                    <div class="titre">Duree Intervention</div>
                    <div class="test">
                        <select id="NiveauDureeIntervention" name="NiveauDureeIntervention"
                            th:field="${fiche.intervention.NiveauDureeIntervention}">
                            <option value="0">Icone</option>
                            <option value="1">Icone et texte</option>
                            <option value="2">Texte</option>
                        </select>
                    </div>
                </div>


            </fieldset>





            <fieldset>
                <legend>Type de maintenance</legend>
                <div>
                    <div class="titre">Maintenance Type</div>
                    <div class="test">
                        <select id="NiveauMaintenanceType" name="NiveauMaintenanceType"
                            th:field="${fiche.maintenance.NiveauMaintenanceType}">
                            <option value="0">Icone</option>
                            <option value="1">Icone et texte</option>
                            <option value="2">Texte</option>
                        </select>
                    </div>
                </div>
            </fieldset>

            <fieldset>
                <legend>Nature de l'intervention</legend>
                <div>
                    <div class="titre">Nature Intervention</div>
                    <div class="test">
                        <select id="NiveauNatureIntervention" name="NiveauNatureIntervention"
                            th:field="${fiche.NiveauNatureIntervention}">
                            <option value="0">Icone</option>
                            <option value="1">Icone et texte</option>
                            <option value="2">Texte</option>
                        </select>
                    </div>
                </div>
            </fieldset>

            <fieldset>
                <legend>Travaux (non) réalisés</legend>
                <div>
                    <div class="titre">Travaux Realises</div>
                    <div class="test">
                        <select id="NiveauTravauxRealises" name="NiveauTravauxRealises"
                            th:field="${fiche.NiveauTravauxRealises}">
                            <option value="0">Icone</option>
                            <option value="1">Icone et texte</option>
                            <option value="2">Texte</option>
                        </select>
                    </div>
                </div>
            </fieldset>


            <fieldset>
                <legend>Matériaux utilisés</legend>
                <div>
                    <div class="titre">Materiaux Utilises</div>
                    <div class="test">
                        <select id="NiveauMateriauxUtilises" name="NiveauMateriauxUtilises"
                            th:field="${fiche.NiveauMateriauxUtilises}">
                            <option value="0">Icone</option>
                            <option value="1">Icone et texte</option>
                            <option value="2">Texte</option>
                        </select>
                    </div>
                </div>
            </fieldset>



            <div class="espaceHor"></div>


            <button type="submit">Submit</button>
        </form>
        </main>

    </div>
</body>
<script>


    document.addEventListener('DOMContentLoaded', function () {
        const dateDemandeInput = document.getElementById('dateDemande');

        dateDemandeInput.addEventListener('input', function () {
            let inputValue = dateDemandeInput.value;
            if (inputValue.length === 2 || inputValue.length === 5) {
                inputValue += '/';
            }

            if (inputValue.length > 10) {
                inputValue = inputValue.slice(0, 10);
            }

            dateDemandeInput.value = inputValue;
        });
    });

    // Add this script to format all date inputs when the page is loaded
    document.addEventListener('DOMContentLoaded', function () {
        const dateInputs = document.querySelectorAll('input[type="date"]');
        dateInputs.forEach(function (input) {
            input.value = formatDate(input.value);
        });
    });

    // Function to format date as dd/MM/yyyy
    function formatDate(dateString) {
        const date = new Date(dateString);
        const day = date.getDate().toString().padStart(2, '0');
        const month = (date.getMonth() + 1).toString().padStart(2, '0');
        const year = date.getFullYear();
        return `${day}/${month}/${year}`;
    }
</script>


</html>