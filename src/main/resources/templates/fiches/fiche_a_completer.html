<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="fr" xml:lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <script src="/js/jquery-3.2.1.slim.min.js"></script>
    <script src="/js/popper.min.js"></script>
    <link href="/css/bootstrap.min.css" rel="stylesheet" />
    <script src="/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="/css/font-awesome.min.css" />
    <title>Modifier Les Niveaux</title>
    <link rel="icon" type="image/vnd.icon" href="/images/cercle.ico">


    <style>
        @font-face {
            font-family: 'OpenDyslexic';
            src: url('/fonts/OpenDyslexic-Regular.otf') format('opentype');
        }
        
        .card-block {
            padding: 10px;
        }

        .scrollcards {
            background-color: #fff;
            overflow: auto;
            white-space: nowrap;
        }


        div.scrollcards .card {
            display: inline-block;
            padding: 14px;
            text-decoration: none;
            height: auto;
            margin-bottom: 1rem;

        }

        .logo {
            width: 1.5rem;
            height: 1.5rem;
        }

        .imageSlider {
            max-height: 10vh;
            max-width: 100%;
            object-fit: contain;
        }

        .imageListe {
            max-height: 20vh;
            max-width: 100%;
            object-fit: contain;
            margin: 1rem;
        }

        .images-selector {
            display: none;
            height: fit-content;
            max-height: 80vh;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            position: fixed;
            top: 5%;
            left: 5%;
            right: 5%;
            bottom: 5%;
            background-color: rgb(255, 255, 255);
            z-index: 999;
            overflow: auto;
            grid-template-columns: repeat(3, 1fr);
            max-width: 85vw;
            margin: 0 auto;
            border-radius: 3%;
        }
    </style>

</head>

<body>
    <div class="container">
        <section class="h-100 p-5 text-white bg-dark rounded-3" style="margin-top: calc(var(--bs-gutter-x) * .5);">
            <div class="container">
                <h1 class="display-4">MODIFIER LES NIVEAUX
                </h1>
            </div>
        </section>



        <form th:action="@{/modifFicheParFormateur/{id}(id=${fiche.id})}" th:object="${fiche}" method="post" id="ficheForm" class="fiche-form">

            
            <hr />


            <div class="row">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col">
                            <a href="/imagestitres/liste" class="btn btn-dark">Modifier les images des titres</a>
                        </div>
                        <div class="col">
                            <a href="/materiaux/liste" class="btn btn-dark">Modifier les materiaux</a>
                        </div>
                    </div>
                </div>
            </div>


            <!--------------------------Intervenant--------------------------------------->
            <hr />
            <legend>
                <div class="row align-items-center">
                    <div class="col-auto d-flex align-items-center">
                        <button class="btn d-flex align-items-center" type="button" data-bs-toggle="collapse"
                            data-bs-target="#imageNiveauIntervenant" aria-expanded="false"
                            aria-controls="imageNiveauIntervenant">
                            <img id="ImageAAfficherOuNonTitreIntervenant" class="display-5 imageIcon" src="/images/check.png"
                                alt="Fait" style="height: 1em;" />
                            <h2 id="TitreSAAfficherOuNonTitreIntervenant" class="display-5 TitreSection" th:style="'color: ' + ${fiche.Intervenant.couleurTitreIntervenant}">Intervenant</h2>
                        </button>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="collapse multi-collapse" id="imageNiveauIntervenant">
                                <div class="card card-body">
                                    <div class="row">
                                        <div class="col">
                                            <div class="titre">Niveau Titre</div>
                                            <select class="selectTitreIcTxt form-select" id="niveauTitreIntervenant" name="niveauTitreIntervenant"
                                                th:attr="data-champ=TitreIntervenant" th:onchange="updateTitreMateriaux()" th:field="${fiche.Intervenant.niveauTitreIntervenant}">
                                                <option value="4" th:selected="${fiche.Intervenant.niveauTitreIntervenant == 4}">Caché</option>
                                                <option value="0" th:selected="${fiche.Intervenant.niveauTitreIntervenant == 0}">Icone</option>
                                                <option value="1" th:selected="${fiche.Intervenant.niveauTitreIntervenant == 1}">Icone et texte</option>
                                                <option value="2" th:selected="${fiche.Intervenant.niveauTitreIntervenant == 2}">Texte</option>
                                            </select>
                                            <input type="hidden" id="niveauTitreHiddenTitreIntervenant"
                                                name="niveauTitreHiddenTitreIntervenant"
                                                th:field="${fiche.Intervenant.niveauTitreIntervenant}" />
                                        </div>


                                        <div class="col">
                                            <div class="titre">Couleur Texte</div>
                                            <input type="color" class="colorPicker" th:value="${fiche.Intervenant.couleurTitreIntervenant}">
                                            <input type="hidden" id="titlehidden" class="titlehidden"
                                                th:field="*{Intervenant.couleurTitreIntervenant}" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <section>
                                                <div class="titre">Icone</div>
                                                <div class="row">
                                                    <div class="scrollcards">
                                                        <div class="card"
                                                            th:each="imageTitre, stat : ${imagesTitreIntervenant}">
                                                            <input class="form-check-input" type="radio"
                                                                name="selectedImageTitreIntervenant"
                                                                th:id="${imageTitre.nomImage}"
                                                                th:value="${imageTitre.nomImage}"
                                                                th:checked="${stat.first}"
                                                                onchange="actualiserImageTitre('TitreIntervenant')">
                                                            <label class="form-check-label"
                                                                th:for="${imageTitre.nomImage}">
                                                                <img class="imageSlider"
                                                                    th:src="@{'/' + ${imageTitre.imageUrl}}"
                                                                    alt="Image Titre" oncontextmenu="return false;"
                                                                    draggable="false" />
                                                                <div class="text-wrap" style="width: min-content;">
                                                                    <h6 th:text="${imageTitre.nomImage}"></h6>
                                                                </div>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>

                                                <input type="hidden" id="imageHiddenTitreIntervenant"
                                                    class="imageHiddenTitreIntervenant"
                                                    th:field="*{Intervenant.imageTitreIntervenantUrl}"
                                                    value="/images/eleve.png" />
                                            </section>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </legend>
            <!-----------------------Prénom et Nom--------------------------------------->
            <div class="row">
                <!-----------------------Prénom--------------------------------------->
                <div class="col-md-6 mb-3">
                    <button class="btn d-flex align-items-center" style="height: 1.5em;" type="button"
                        data-bs-toggle="collapse" data-bs-target="#imageNiveauIntervenantPrenom" aria-expanded="false"
                        aria-controls="imageNiveauIntervenantPrenom">
                        <img id="ImageAAfficherOuNonTitreIntervenantPrenom" class="display-8" src="/images/check.png"
                            alt="Fait" style="height: 1em;" />
                        <label id="TitreSAAfficherOuNonTitreIntervenantPrenom" class="TitreSection" for="firstName"
                            style="cursor: pointer;" th:style="'color: ' + ${fiche.Intervenant.couleurPrenom}">Prénom</label>
                    </button>

                    <div class="row">
                        <div class="col">
                            <div class="collapse multi-collapse" id="imageNiveauIntervenantPrenom">
                                <div class="card card-body">
                                    <div class="row">
                                        <div class="col">
                                            <div class="titre">Niveau Titre</div>
                                            <select class="selectTitreIcTxt form-select" id="niveauTitreIntervenantPrenom" name="niveauTitreIntervenantPrenom"
                                                th:attr="data-champ=TitreIntervenantPrenom" th:onchange="updateTitreMateriaux()" th:field="${fiche.Intervenant.niveauTitreIntervenantPrenom}">
                                                <option value="0" th:selected="${fiche.Intervenant.niveauTitreIntervenantPrenom == 0}">Icone</option>
                                                <option value="1" th:selected="${fiche.Intervenant.niveauTitreIntervenantPrenom == 1}">Icone et texte</option>
                                                <option value="2" th:selected="${fiche.Intervenant.niveauTitreIntervenantPrenom == 2}">Texte</option>
                                            </select>
                                            <input type="hidden" id="niveauTitreHiddenTitreIntervenantPrenom"
                                                name="niveauTitreHiddenTitreIntervenantPrenom"
                                                th:field="${fiche.Intervenant.niveauTitreIntervenantPrenom}" />
                                        </div>


                                        <div class="col">
                                            <div class="titre">Couleur Texte</div>
                                            <input type="color" class="colorPicker" th:value="${fiche.Intervenant.couleurPrenom}" />
                                            <input type="hidden" id="titlehidden" class="titlehidden"
                                                th:field="*{Intervenant.couleurPrenom}" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <section>
                                                <div class="titre">Icone</div>
                                                <div class="row">
                                                    <div class="scrollcards">
                                                        <div class="card"
                                                            th:each="imageTitre, stat : ${imagesTitreIntervenantPrenom}">
                                                            <input class="form-check-input" type="radio"
                                                                name="selectedImageTitreIntervenantPrenom"
                                                                th:id="${imageTitre.nomImage}"
                                                                th:value="${imageTitre.nomImage}"
                                                                th:checked="${stat.first}"
                                                                onchange="actualiserImageTitre('TitreIntervenantPrenom')">
                                                            <label class="form-check-label"
                                                                th:for="${imageTitre.nomImage}">
                                                                <img class="imageSlider"
                                                                    th:src="@{'/' + ${imageTitre.imageUrl}}"
                                                                    alt="Image Titre" oncontextmenu="return false;"
                                                                    draggable="false" />
                                                                <div class="text-wrap" style="width: min-content;">
                                                                    <h6 th:text="${imageTitre.nomImage}"></h6>
                                                                </div>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>

                                            </section>
                                        </div>
                                        <input type="hidden" id="imageHiddenTitreIntervenantPrenom"
                                            class="imageHiddenTitreIntervenantPrenom"
                                            th:field="*{Intervenant.imageTitreIntervenantPrenomUrl}"
                                            value="/images/eleve.png" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>



                    <input th:placeholder="${user.prenom}" type="text" class="form-control" id="firstName" disabled>
                </div>
                <!-----------------------Nom--------------------------------------->
                <div class="col-md-6 mb-3">
                    <button class="btn d-flex align-items-center" style="height: 1.5em;" type="button"
                        data-bs-toggle="collapse" data-bs-target="#imageNiveauIntervenantNom" aria-expanded="false"
                        aria-controls="imageNiveauIntervenantNom">
                        <img id="ImageAAfficherOuNonTitreIntervenantNom" class="display-8" src="/images/check.png" alt="Fait"
                            style="height: 1em;" />
                        <label id="TitreSAAfficherOuNonTitreIntervenantNom" class="TitreSection" for="lastName"
                            style="cursor: pointer;" th:style="'color: ' + ${fiche.Intervenant.couleurNom}">Nom</label>
                    </button>

                    <div class="row">
                        <div class="col">
                            <div class="collapse multi-collapse" id="imageNiveauIntervenantNom">
                                <div class="card card-body">
                                    <div class="row">
                                        <div class="col">
                                            <div class="titre">Niveau Titre</div>
                                            <select class="selectTitreIcTxt form-select" id="niveauTitreIntervenantNom" name="niveauTitreIntervenantNom"
                                                th:attr="data-champ=TitreIntervenantNom" th:onchange="updateTitreMateriaux()" th:field="${fiche.Intervenant.niveauTitreIntervenantNom}">
                                                <option value="0" th:selected="${fiche.Intervenant.niveauTitreIntervenantNom == 0}">Icone</option>
                                                <option value="1" th:selected="${fiche.Intervenant.niveauTitreIntervenantNom == 1}">Icone et texte</option>
                                                <option value="2" th:selected="${fiche.Intervenant.niveauTitreIntervenantNom == 2}">Texte</option>
                                            </select>
                                            <input type="hidden" id="niveauTitreHiddenTitreIntervenantNom"
                                                name="niveauTitreHiddenTitreIntervenantNom"
                                                th:field="${fiche.Intervenant.niveauTitreIntervenantNom}" />
                                        </div>

                                        
                                        <div class="col">
                                            <div class="titre">Couleur Texte</div>
                                            <input type="color" class="colorPicker" th:value="${fiche.Intervenant.couleurNom}">
                                            <input type="hidden" id="titlehidden" class="titlehidden"
                                                th:field="*{Intervenant.couleurNom}" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <section>
                                                <div class="titre">Icone</div>
                                                <div class="row">
                                                    <div class="scrollcards">
                                                        <div class="card"
                                                            th:each="imageTitre, stat : ${imagesTitreIntervenantNom}">
                                                            <input class="form-check-input" type="radio"
                                                                name="selectedImageTitreIntervenantNom"
                                                                th:id="${imageTitre.nomImage}"
                                                                th:value="${imageTitre.nomImage}"
                                                                th:checked="${stat.first}"
                                                                onchange="actualiserImageTitre('TitreIntervenantNom')">
                                                            <label class="form-check-label"
                                                                th:for="${imageTitre.nomImage}">
                                                                <img class="imageSlider"
                                                                    th:src="@{'/' + ${imageTitre.imageUrl}}"
                                                                    alt="Image Titre" oncontextmenu="return false;"
                                                                    draggable="false" />
                                                                <div class="text-wrap" style="width: min-content;">
                                                                    <h6 th:text="${imageTitre.nomImage}"></h6>
                                                                </div>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>

                                            </section>
                                        </div>
                                        <input type="hidden" id="imageHiddenTitreIntervenantNom"
                                            class="imageHiddenTitreIntervenantNom"
                                            th:field="*{Intervenant.imageTitreIntervenantNomUrl}"
                                            value="/images/eleve.png" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <input type="text" class="form-control" id="lastName" th:placeholder="${user.nom}" disabled>
                </div>
            </div>
            <!--------------------------Demande--------------------------------------->
            <hr />
            <legend>
                <div class="row align-items-center">
                    <div class="col-auto d-flex align-items-center">
                        <button class="btn d-flex align-items-center" type="button" data-bs-toggle="collapse"
                            data-bs-target="#imageNiveauDemande" aria-expanded="false"
                            aria-controls="imageNiveauDemande">
                            <img id="ImageAAfficherOuNonTitreDemande" class="display-5 imageIcon" src="/images/check.png"
                                alt="Fait" style="height: 1em;" />
                            <h2 id="TitreSAAfficherOuNonTitreDemande" class="display-5 TitreSection" th:style="'color: ' + ${fiche.Demande.couleurTitreDemande}">Demande</h2>
                        </button>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="collapse multi-collapse" id="imageNiveauDemande">
                                <div class="card card-body">
                                    <div class="row">

                                        <div class="col">
                                            <div class="titre">Niveau Titre</div>
                                            <select class="selectTitreIcTxt form-select" id="niveauTitreDemande" name="niveauTitreDemande"
                                                th:attr="data-champ=TitreDemande" th:onchange="updateTitreMateriaux()" th:field="${fiche.demande.niveauTitreDemande}">
                                                <option value="4" th:selected="${fiche.demande.niveauTitreDemande == 4}">Caché</option>
                                                <option value="0" th:selected="${fiche.demande.niveauTitreDemande == 0}">Icone</option>
                                                <option value="1" th:selected="${fiche.Demande.niveauTitreDemande == 1}">Icone et texte</option>
                                                <option value="2" th:selected="${fiche.Demande.niveauTitreDemande == 2}">Texte</option>
                                            </select>
                                            <input type="hidden" id="niveauTitreHiddenTitreDemande"
                                                name="niveauTitreHiddenTitreDemande"
                                                th:field="${fiche.Demande.niveauTitreDemande}" />
                                        </div>


                                        <div class="col">
                                            <div class="titre">Couleur Texte</div>
                                            <input type="color" class="colorPicker" th:value="${fiche.Demande.couleurTitreDemande}">
                                            <input type="hidden" id="titlehidden" class="titlehidden"
                                                th:field="*{Demande.couleurTitreDemande}" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <section>
                                                <div class="titre">Icone</div>
                                                <div class="row">
                                                    <div class="scrollcards">
                                                        <div class="card"
                                                            th:each="imageTitre, stat : ${imagesTitreDemande}">
                                                            <input class="form-check-input" type="radio"
                                                                name="selectedImageTitreDemande"
                                                                th:id="${imageTitre.nomImage}"
                                                                th:value="${imageTitre.nomImage}"
                                                                th:checked="${stat.first}"
                                                                onchange="actualiserImageTitre('TitreDemande')">
                                                            <label class="form-check-label"
                                                                th:for="${imageTitre.nomImage}">
                                                                <img class="imageSlider"
                                                                    th:src="@{'/' + ${imageTitre.imageUrl}}"
                                                                    alt="Image Titre" oncontextmenu="return false;"
                                                                    draggable="false" />
                                                                <div class="text-wrap" style="width: min-content;">
                                                                    <h6 th:text="${imageTitre.nomImage}"></h6>
                                                                </div>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <input type="hidden" id="imageHiddenTitreDemande" class="imageHiddenDemande"
                                                    th:field="*{Demande.imageTitreDemandeUrl}" />
                                            </section>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </legend>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <button class="btn d-flex align-items-center" style="height: 1.5em;" type="button"
                        data-bs-toggle="collapse" data-bs-target="#imageNiveauDemandeNom" aria-expanded="false"
                        aria-controls="imageNiveauDemandeNom">
                        <img id="ImageAAfficherOuNonDemandeNom" class="display-8" src="/images/check.png" alt="Fait"
                            style="height: 1em;" />
                        <label id="TitreSAAfficherOuNonDemandeNom" class="TitreSection" for="disabledNomDemandeur"
                            style="cursor: pointer;" th:style="'color: ' + ${fiche.Demande.couleurNomDemandeur}">Nom du demandeur</label>
                    </button>

                    <div class="row">
                        <div class="col">
                            <div class="collapse multi-collapse" id="imageNiveauDemandeNom">
                                <div class="card card-body">
                                    <div class="row">
                                        <div class="col">
                                            <div class="titre">Niveau Titre</div>
                                            <select class="selectTitreIcTxt form-select" id="niveauDemandeNom" name="niveauDemandeNom"
                                                th:attr="data-champ=DemandeNom" th:onchange="updateTitreMateriaux()" th:field="${fiche.demande.niveauTitreDemandeNom}">
                                                <option value="0" th:selected="${fiche.demande.niveauTitreDemandeNom == 0}">Icone</option>
                                                <option value="1" th:selected="${fiche.Demande.niveauTitreDemandeNom == 1}">Icone et texte</option>
                                                <option value="2" th:selected="${fiche.Demande.niveauTitreDemandeNom == 2}">Texte</option>
                                            </select>
                                            <input type="hidden" id="niveauTitreHiddenDemandeNom"
                                                name="niveauTitreHiddenDemandeNom"
                                                th:field="${fiche.Demande.niveauTitreDemandeNom}" />
                                        </div>

                                        <div class="col">
                                            <div class="titre">Couleur Texte</div>
                                            <input type="color" class="colorPicker" th:value="${fiche.Demande.couleurNomDemandeur}">
                                            <input type="hidden" id="titlehidden" class="titlehidden"
                                                th:field="*{Demande.couleurNomDemandeur}" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <section>
                                                <div class="titre">Icone</div>
                                                <div
                                                    th:replace="fragments/intervenant_fragment.html::scrollcards(field='DemandeNom')">
                                            </section>
                                        </div>
                                        <input type="hidden" id="imageHiddenDemandeNom" class="imageHiddenDemandeNom"
                                            th:field="*{Demande.imageTitreDemandeNomUrl}" value="/images/eleve.png" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <input type="text" id="disabledNomDemandeur" class="form-control"
                        th:field="*{demande.nomDemandeur}">


                    <button class="btn d-flex align-items-center" style="height: 1.5em;" type="button"
                        data-bs-toggle="collapse" data-bs-target="#imageNiveauDemandeDegreUrgence" aria-expanded="false"
                        aria-controls="imageNiveauDemandeDegreUrgence">
                        <img id="ImageAAfficherOuNonDemandeDegreUrgence" class="display-8" src="/images/check.png"
                            alt="Fait" style="height: 1em;" />
                        <label id="TitreSAAfficherOuNonDemandeDegreUrgence" class="TitreSection"
                            for="disabledDegreDemandeDegreUrgence" style="cursor: pointer;" th:style="'color: ' + ${fiche.Demande.couleurDegreUrgence}">Degré d'urgence</label>
                    </button>

                    <div class="row">
                        <div class="col">
                            <div class="collapse multi-collapse" id="imageNiveauDemandeDegreUrgence">
                                <div class="card card-body">
                                    <div class="row">

                                        <div class="col">
                                            <div class="titre">Niveau Titre</div>
                                            <select class="selectTitreIcTxt form-select" id="niveauDemandeDegreUrgence" name="niveauDemandeDegreUrgence"
                                                th:attr="data-champ=DemandeDegreUrgence" th:onchange="updateTitreMateriaux()" th:field="${fiche.demande.niveauTitreDemandeDegreUrgence}">
                                                <option value="0" th:selected="${fiche.demande.niveauTitreDemandeDegreUrgence == 0}">Icone</option>
                                                <option value="1" th:selected="${fiche.Demande.niveauTitreDemandeDegreUrgence == 1}">Icone et texte</option>
                                                <option value="2" th:selected="${fiche.Demande.niveauTitreDemandeDegreUrgence == 2}">Texte</option>
                                            </select>
                                            <input type="hidden" id="niveauTitreHiddenDemandeDegreUrgence"
                                                name="niveauTitreHiddenDemandeDegreUrgence"
                                                th:field="${fiche.Demande.niveauTitreDemandeDegreUrgence}" />
                                        </div>

                                        <div class="col">
                                            <div class="titre">Couleur Texte</div>
                                            <input type="color" class="colorPicker" th:value="${fiche.Demande.couleurDegreUrgence}">
                                            <input type="hidden" id="titlehidden" class="titlehidden"
                                                th:field="*{Demande.couleurDegreUrgence}" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <section>
                                                <div class="titre">Icone</div>
                                                <div
                                                    th:replace="fragments/intervenant_fragment.html::scrollcards(field='DemandeDegreUrgence')">
                                            </section>
                                        </div>
                                        <input type="hidden" id="imageHiddenDemandeDegreUrgence"
                                            class="imageHiddenDemandeDegreUrgence"
                                            th:field="*{Demande.imageTitreDemandeDegreUrgenceUrl}"
                                            value="/images/eleve.png" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <input type="text" id="disabledDegreUrgence" class="form-control"
                        th:field="*{demande.degreUrgence}">
                </div>
                <div class="col-md-6 mb-3">
                    <button class="btn d-flex align-items-center" style="height: 1.5em;" type="button"
                        data-bs-toggle="collapse" data-bs-target="#imageNiveauDemandeDate" aria-expanded="false"
                        aria-controls="imageNiveauDemandeDate">
                        <img id="ImageAAfficherOuNonDemandeDate" class="display-8" src="/images/check.png" alt="Fait"
                            style="height: 1em;" />
                        <label id="TitreSAAfficherOuNonDemandeDate" class="TitreSection" for="disabledDegreDemandeDate"
                            style="cursor: pointer;" th:style="'color: ' + ${fiche.Demande.couleurDateDemande}">Date de la demande</label>
                    </button>

                    <div class="row">
                        <div class="col">
                            <div class="collapse multi-collapse" id="imageNiveauDemandeDate">
                                <div class="card card-body">
                                    <div class="row">
                                        <div class="col">
                                            <div class="titre">Niveau Titre</div>
                                            <select class="selectTitreIcTxt form-select" id="niveauDemandeDate" name="niveauDemandeDate"
                                                th:attr="data-champ=DemandeDate" th:onchange="updateTitreMateriaux()" th:field="${fiche.demande.niveauTitreDemandeDate}">
                                                <option value="0" th:selected="${fiche.demande.niveauTitreDemandeDate == 0}">Icone</option>
                                                <option value="1" th:selected="${fiche.demande.niveauTitreDemandeDate == 1}">Icone et texte</option>
                                                <option value="2" th:selected="${fiche.demande.niveauTitreDemandeDate == 2}">Texte</option>
                                            </select>
                                            <input type="hidden" id="niveauTitreHiddenDemandeDate"
                                                name="niveauTitreHiddenDemandeDate"
                                                th:field="${fiche.demande.niveauTitreDemandeDate}" />
                                        </div>

                                        
                                        <div class="col">
                                            <div class="titre">Couleur Texte</div>
                                            <input type="color" class="colorPicker" th:value="${fiche.Demande.couleurDateDemande}">
                                            <input type="hidden" id="titlehidden" class="titlehidden"
                                                th:field="*{demande.couleurDateDemande}" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <section>
                                                <div class="titre">Icone</div>
                                                <div
                                                    th:replace="fragments/intervenant_fragment.html::scrollcards(field='DemandeDate')">
                                            </section>
                                        </div>
                                        <input type="hidden" id="imageHiddenDemandeDate" class="imageHiddenDemandeDate"
                                            th:field="*{demande.imageTitreDemandeDateUrl}" value="/images/eleve.png" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <input type="text" id="disabledDateDemande" name="disabledDateDemande" class="form-control"
                        th:field="*{demande.dateDemande}" />




                    <button class="btn d-flex align-items-center" style="height: 1.5em;" type="button"
                        data-bs-toggle="collapse" data-bs-target="#imageNiveauDemandeLocalisation" aria-expanded="false"
                        aria-controls="imageNiveauDemandeLocalisation">
                        <img id="ImageAAfficherOuNonDemandeLocalisation" class="display-8" src="/images/check.png"
                            alt="Fait" style="height: 1em;" />
                        <label id="TitreSAAfficherOuNonDemandeLocalisation" class="TitreSection"
                            for="disabledLocalisation" style="cursor: pointer;" th:style="'color: ' + ${fiche.Demande.couleurLocalisation}">Localisation</label>
                    </button>

                    <div class="row">
                        <div class="col">
                            <div class="collapse multi-collapse" id="imageNiveauDemandeLocalisation">
                                <div class="card card-body">
                                    <div class="row">
                                        <div class="col">
                                            <div class="titre">Niveau Titre</div>
                                            <select class="selectTitreIcTxt form-select" id="niveauDemandeLocalisation" name="niveauDemandeLocalisation"
                                                th:attr="data-champ=DemandeLocalisation" th:onchange="updateTitreMateriaux()" th:field="${fiche.demande.niveauTitreDemandeLocalisation}">
                                                <option value="0" th:selected="${fiche.demande.niveauTitreDemandeLocalisation == 0}">Icone</option>
                                                <option value="1" th:selected="${fiche.demande.niveauTitreDemandeLocalisation == 1}">Icone et texte</option>
                                                <option value="2" th:selected="${fiche.demande.niveauTitreDemandeLocalisation == 2}">Texte</option>
                                            </select>
                                            <input type="hidden" id="niveauTitreHiddenDemandeLocalisation"
                                                name="niveauTitreHiddenDemandeLocalisation"
                                                th:field="${fiche.demande.niveauTitreDemandeLocalisation}" />
                                        </div>

                                        <div class="col">
                                            <div class="titre">Couleur Texte</div>
                                            <input type="color" class="colorPicker" th:value="${fiche.Demande.couleurLocalisation}">
                                            <input type="hidden" id="titlehidden" class="titlehidden"
                                                th:field="*{demande.couleurLocalisation}" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <section>
                                                <div class="titre">Icone</div>
                                                <div
                                                    th:replace="fragments/intervenant_fragment.html::scrollcards(field='DemandeLocalisation')">
                                            </section>
                                        </div>
                                        <input type="hidden" id="imageHiddenDemandeLocalisation"
                                            class="imageHiddenDemandeLocalisation"
                                            th:field="*{demande.imageTitreDemandeLocalisationUrl}"
                                            value="/images/eleve.png" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <input type="text" id="disabledLocalisation" name="disabledLocalisation" class="form-control"
                        th:field="*{demande.localisation}" />
                </div>
            </div>
            <div>
                <div class="form-group">

                    <button class="btn d-flex align-items-center" style="height: 1.5em;" type="button"
                        data-bs-toggle="collapse" data-bs-target="#imageNiveauDemandeDescription" aria-expanded="false"
                        aria-controls="imageNiveauDemandeDescription">
                        <img id="ImageAAfficherOuNonDemandeDescription" class="display-8" src="/images/check.png"
                            alt="Fait" style="height: 1em;" />
                        <label id="TitreSAAfficherOuNonDemandeDescription" class="TitreSection"
                            for="disabledDescription" style="cursor: pointer;" th:style="'color: ' + ${fiche.Demande.couleurDescription}">Description</label>
                    </button>

                    <div class="row">
                        <div class="col">
                            <div class="collapse multi-collapse" id="imageNiveauDemandeDescription">
                                <div class="card card-body">
                                    <div class="row">

                                        <div class="col">
                                            <div class="titre">Niveau Titre</div>
                                            <select class="selectTitreIcTxt form-select" id="niveauDemandeDescription" name="niveauDemandeDescription"
                                                th:attr="data-champ=DemandeDescription" th:onchange="updateTitreMateriaux()" th:field="${fiche.intervention.niveauTypeIntervention}">
                                                <option value="0" th:selected="${fiche.intervention.NiveauTypeIntervention == 0}">Icone</option>
                                                <option value="1" th:selected="${fiche.intervention.NiveauTypeIntervention == 1}">Icone et texte</option>
                                                <option value="2" th:selected="${fiche.intervention.NiveauTypeIntervention == 2}">Texte</option>
                                            </select>
                                            <input type="hidden" id="niveauTitreHiddenDemandeDescription"
                                                name="niveauTitreHiddenDemandeDescription"
                                                th:field="${fiche.demande.niveauTitreDemandeDescription}" />
                                        </div>
                                        <div class="col">
                                            <div class="titre">Couleur Texte</div>
                                            <input type="color" class="colorPicker" th:value="${fiche.Demande.couleurDescription}">
                                            <input type="hidden" id="titlehidden" class="titlehidden"
                                                th:field="*{demande.couleurDescription}" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <section>
                                                <div class="titre">Icone</div>
                                                <div
                                                    th:replace="fragments/intervenant_fragment.html::scrollcards(field='DemandeDescription')">
                                            </section>
                                        </div>
                                        <input type="hidden" id="imageHiddenDemandeDescription"
                                            class="imageHiddenDemandeDescription"
                                            th:field="*{demande.imageTitreDemandeDescriptionUrl}"
                                            value="/images/eleve.png" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <textarea rows="10" id="disabledDescription" name="disabledDescription" class="form-control"
                        th:field="*{demande.description}"></textarea>
                </div>
            </div>

            <!--------------------------Intervention--------------------------------------->
            <hr />
            <legend>
                <div class="row align-items-center">
                    <div class="col-auto d-flex align-items-center">
                        <button class="btn d-flex align-items-center" type="button" data-bs-toggle="collapse"
                            data-bs-target="#imageNiveauTitreIntervention" aria-expanded="false"
                            aria-controls="imageNiveauTitreIntervention">
                            <img id="ImageAAfficherOuNonTitreIntervention" class="display-5 imageIcon"
                                src="/images/check.png" alt="Fait" style="height: 1em;" />
                            <h2 id="TitreSAAfficherOuNonTitreIntervention" class="display-5 TitreSection" th:style="'color: ' + ${fiche.Intervention.couleurTitreIntervention}">Intervention</h2>
                        </button>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="collapse multi-collapse" id="imageNiveauTitreIntervention">
                                <div class="card card-body">
                                    <div class="row">
                                        <div class="col">
                                            <div class="titre">Niveau Titre</div>

                                            <select class="selectTitreIcTxt form-select" id="niveauTitreIntervention" name="niveauTitreIntervention"
                                                th:attr="data-champ=TitreIntervention" th:onchange="updateTitreMateriaux()" th:field="${fiche.intervention.niveauTitreIntervention}">
                                                <option value="4" th:selected="${fiche.intervention.NiveauTitreIntervention == 4}">Caché</option>
                                                <option value="0" th:selected="${fiche.intervention.niveauTitreIntervention == 0}">Icone</option>
                                                <option value="1" th:selected="${fiche.intervention.niveauTitreIntervention == 1}">Icone et texte</option>
                                                <option value="2" th:selected="${fiche.intervention.niveauTitreIntervention == 2}">Texte</option>
                                            </select>

                                            <input type="hidden" id="niveauTitreHiddenTitreIntervention"
                                                        name="niveauTitreHiddenTitreIntervention"
                                                        th:field="${fiche.intervention.niveauTitreIntervention}" />
                                        </div>
                                        
                                        <div class="col">
                                            <div class="titre">Couleur Texte</div>
                                            <input type="color" class="colorPicker" th:value="${fiche.Intervention.couleurTitreIntervention}">
                                            <input type="hidden" id="titlehidden" class="titlehidden"
                                                th:field="*{Intervention.couleurTitreIntervention}" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <section>
                                                <div class="titre">Icone</div>
                                                <div class="row">
                                                    <div class="scrollcards">
                                                        <div class="card"
                                                            th:each="imageTitre, stat : ${imagesTitreIntervention}">
                                                            <input class="form-check-input" type="radio"
                                                                name="selectedImageTitreIntervention"
                                                                th:id="${imageTitre.nomImage}"
                                                                th:value="${imageTitre.nomImage}"
                                                                th:checked="${stat.first}"
                                                                onchange="actualiserImageTitre('TitreIntervention')">
                                                            <label class="form-check-label"
                                                                th:for="${imageTitre.nomImage}">
                                                                <img class="imageSlider"
                                                                    th:src="@{'/' + ${imageTitre.imageUrl}}"
                                                                    alt="Image Titre" oncontextmenu="return false;"
                                                                    draggable="false" />
                                                                <div class="text-wrap" style="width: min-content;">
                                                                    <h6 th:text="${imageTitre.nomImage}"></h6>
                                                                </div>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <input type="hidden" id="imageHiddenTitreIntervention"
                                                    class="imageHiddenIntervention"
                                                    th:field="*{Intervention.imageTitreInterventionUrl}"
                                                    value="/images/eleve.png" />
                                            </section>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </legend>

            <div class="row">
                <div class="col-md-4 mb-3">


                    <button class="btn d-flex align-items-center" style="height: 1.5em;" type="button"
                        data-bs-toggle="collapse" data-bs-target="#imageNiveauInterventionDate" aria-expanded="false"
                        aria-controls="imageNiveauInterventionDate">
                        <img id="ImageAAfficherOuNonInterventionDate" class="display-8" src="/images/check.png"
                            alt="Fait" style="height: 1em;" />
                        <label id="TitreSAAfficherOuNonInterventionDate" class="TitreSection" for="newDateIntervention"
                            style="cursor: pointer;" th:style="'color: ' + ${fiche.Intervention.couleurDateIntervention}">Date de l'intervention</label>
                    </button>

                    <div class="row">
                        <div class="col">
                            <div class="collapse multi-collapse" id="imageNiveauInterventionDate">
                                <div class="card card-body">
                                    <div class="row">
                                        <div class="col">
                                            <div class="titre">Niveau Titre</div>
                                            <select class="selectTitreIcTxt form-select" id="niveauInterventionDate" name="niveauInterventionDate"
                                                th:attr="data-champ=InterventionDate" th:onchange="updateTitreMateriaux()" th:field="${fiche.intervention.niveauTypeIntervention}">
                                                <option value="0" th:selected="${fiche.intervention.NiveauTypeIntervention == 0}">Icone</option>
                                                <option value="1" th:selected="${fiche.intervention.NiveauTypeIntervention == 1}">Icone et texte</option>
                                                <option value="2" th:selected="${fiche.intervention.NiveauTypeIntervention == 2}">Texte</option>
                                            </select>

                                            <input type="hidden" id="niveauTitreHiddenInterventionDate"
                                                        name="niveauTitreHiddenInterventionDate"
                                                        th:field="${fiche.intervention.niveauDureeIntervention}" />
                                        </div>

                                        <div class="col">
                                            <div class="titre">Couleur Texte</div>
                                            <input type="color" class="colorPicker" th:value="${fiche.Intervention.couleurDateIntervention}">
                                            <input type="hidden" id="titlehidden" class="titlehidden"
                                                th:field="*{intervention.couleurDateIntervention}" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <section>
                                                <div class="titre">Icone</div>
                                                <div
                                                    th:replace="fragments/intervenant_fragment.html::scrollcards(field='InterventionDate')">
                                            </section>
                                        </div>
                                        <input type="hidden" id="imageHiddenInterventionDate"
                                            class="imageHiddenInterventionDate"
                                            th:field="*{Intervention.imageDateInterventionUrl}"
                                            value="/images/eleve.png" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <input type="text" id="newDateIntervention" name="newDateIntervention" class="form-control"
                        th:field="*{intervention.dateIntervention}" disabled/>




                    <button class="btn d-flex align-items-center" style="height: 1.5em;" type="button"
                        data-bs-toggle="collapse" data-bs-target="#imageNiveauInterventionDuree" aria-expanded="false"
                        aria-controls="imageNiveauInterventionDuree">
                        <img id="ImageAAfficherOuNonInterventionDuree" class="display-8" src="/images/check.png"
                            alt="Fait" style="height: 1em;" />
                        <label id="TitreSAAfficherOuNonInterventionDuree" class="TitreSection"
                            for="newDureeIntervention" style="cursor: pointer;" th:style="'color: ' + ${fiche.Intervention.couleurDureeIntervention}">Durée de l'intervention</label>
                    </button>

                    <div class="row">
                        <div class="col">
                            <div class="collapse multi-collapse" id="imageNiveauInterventionDuree">
                                <div class="card card-body">
                                    <div class="row">
                                        <div class="col">
                                            <div class="titre">Niveau Titre</div>
                                            <select class="selectTitreIcTxt form-select" id="niveauInterventionDuree" name="niveauInterventionDuree"
                                                th:attr="data-champ=InterventionDuree" th:onchange="updateTitreMateriaux()" th:field="${fiche.intervention.niveauTypeIntervention}">
                                                <option value="0" th:selected="${fiche.intervention.NiveauTypeIntervention == 0}">Icone</option>
                                                <option value="1" th:selected="${fiche.intervention.NiveauTypeIntervention == 1}">Icone et texte</option>
                                                <option value="2" th:selected="${fiche.intervention.NiveauTypeIntervention == 2}">Texte</option>
                                            </select>

                                            <input type="hidden" id="niveauTitreHiddenInterventionDuree"
                                                        name="niveauTitreHiddenInterventionDuree"
                                                        th:field="${fiche.intervention.niveauDureeIntervention}" />
                                        </div>

                                        <div class="col">
                                            <div class="titre">Couleur Texte</div>
                                            <input type="color" class="colorPicker" th:value="${fiche.Intervention.couleurDureeIntervention}">
                                            <input type="hidden" id="titlehidden" class="titlehidden"
                                                th:field="*{intervention.couleurDureeIntervention}" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <section>
                                                <div class="titre">Icone</div>
                                                <div
                                                    th:replace="fragments/intervenant_fragment.html::scrollcards(field='InterventionDuree')">
                                            </section>
                                        </div>
                                        <input type="hidden" id="imageHiddenInterventionDuree"
                                            class="imageHiddenInterventionDuree"
                                            th:field="*{Intervention.imageDureeInterventionUrl}"
                                            value="/images/eleve.png" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <input type="text" id="newDureeIntervention" name="newDureeIntervention" class="form-control"
                        th:field="*{intervention.dureeIntervention}" disabled>
                </div>


                <div class="col-md-4 mb-3">

                    <button class="btn d-flex align-items-center" style="height: 1.5em;" type="button"
                        data-bs-toggle="collapse" data-bs-target="#imageNiveauTypeIntervention" aria-expanded="false"
                        aria-controls="imageNiveauTypeIntervention">
                        <img id="ImageAAfficherOuNonInterventionType" class="display-8" src="/images/check.png"
                            alt="Fait" style="height: 1em;" />
                        <label id="TitreSAAfficherOuNonInterventionType" class="TitreSection" for="newTypeIntervention"
                            style="cursor: pointer;" th:style="'color: ' + ${fiche.Intervention.couleurTypeIntervention}">Type d'intervention</label>
                    </button>
                    <div class="row">
                        <div class="col">
                            <div class="collapse multi-collapse" id="imageNiveauTypeIntervention">
                                <div class="card card-body">
                                    
                                    <div class="row">


                                        <div class="col">
                                            <div class="titre">Niveau Titre</div>
                                            <select class="selectTitreIcTxt form-select" id="niveauInterventionType" name="niveauInterventionType"
                                                th:attr="data-champ=InterventionType" th:onchange="updateTitreMateriaux()" th:field="${fiche.intervention.niveauTypeIntervention}">
                                                <option value="0" th:selected="${fiche.intervention.NiveauTypeIntervention == 0}">Icone</option>
                                                <option value="1" th:selected="${fiche.intervention.NiveauTypeIntervention == 1}">Icone et texte</option>
                                                <option value="2" th:selected="${fiche.intervention.NiveauTypeIntervention == 2}">Texte</option>
                                            </select>

                                            <input type="hidden" id="niveauTitreHiddenInterventionType"
                                                            name="niveauTitreHiddenInterventionType"
                                                            th:field="${fiche.intervention.niveauTypeIntervention}" />
                                        </div>

                                        <div class="col">
                                            <div class="titre">Couleur Texte</div>
                                            <input type="color" class="colorPicker" th:value="${fiche.Intervention.couleurTypeIntervention}">
                                            <input type="hidden" id="titlehidden" class="titlehidden"
                                                th:field="*{intervention.couleurTypeIntervention}" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <section>
                                                <div class="titre">Icone</div>
                                                <div
                                                    th:replace="fragments/intervenant_fragment.html::scrollcards(field='InterventionType')">
                                            </section>
                                        </div>
                                        <input type="hidden" id="imageHiddenInterventionType"
                                            class="imageHiddenInterventionType"
                                            th:field="*{Intervention.imageTypeInterventionUrl}"
                                            value="/images/eleve.png" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="disabledTypeIntervention"
                        th:each="nature : ${typeInterventionList}">
                        <div class="media form-check">
                            <input class="form-check-input" type="radio" name="intervention" th:value="${nature.name()}"
                                th:id="${'radio-' + nature}" th:field="*{intervention.TypeIntervention}" />
                            <img class="align-self-start mr-3 logo"
                                th:src="${'/images/' + nature.name().toLowerCase() + '.png'}"
                                th:alt="${'/images/' + nature.name().toLowerCase() + '.png'}" />
                            <label th:for="${'radio-' + nature}"
                                th:text="${#strings.capitalize(nature.name().toLowerCase().replace('_', ' '))}"></label>
                        </div>
                    </div>
                </div>


                <div class="col-md-4 mb-3">


                    <button class="btn d-flex align-items-center" style="height: 1.5em;" type="button"
                        data-bs-toggle="collapse" data-bs-target="#imageNiveauMaintenanceType" aria-expanded="false"
                        aria-controls="imageNiveauMaintenanceType">
                        <img id="ImageAAfficherOuNonMaintenanceType" class="display-8" src="/images/check.png"
                            alt="Fait" style="height: 1em;" />
                        <label id="TitreSAAfficherOuNonMaintenanceType" class="TitreSection" for="newMaintenanceType"
                            style="cursor: pointer;" th:style="'color: ' + ${fiche.Maintenance.CouleurMaintenanceType}">Type de maintenance</label>
                    </button>



                    <div class="row">
                        <div class="col">
                            <div class="collapse multi-collapse" id="imageNiveauMaintenanceType">
                                <div class="card card-body">
                                    <div class="row">
                                        <div class="col">
                                            <div class="titre">Niveau Titre</div>
                                            <select class="selectTitreIcTxt form-select" id="niveauMaintenanceType" name="niveauMaintenanceType"
                                                th:attr="data-champ=MaintenanceType" th:onchange="updateTitreMateriaux()" th:field="${fiche.maintenance.NiveauMaintenanceType}">
                                                <option value="0" th:selected="${fiche.maintenance.NiveauMaintenanceType == 0}">Icone</option>
                                                <option value="1" th:selected="${fiche.maintenance.NiveauMaintenanceType == 1}">Icone et texte</option>
                                                <option value="2" th:selected="${fiche.maintenance.NiveauMaintenanceType == 2}">Texte</option>
                                            </select>

                                            <input type="hidden" id="niveauTitreHiddenMaintenanceType"
                                                            name="niveauTitreHiddenMaintenanceType"
                                                            th:field="${fiche.maintenance.NiveauMaintenanceType}" />
                                        </div>
                                        

                                        <div class="col">
                                            <div class="titre">Couleur Texte</div>
                                            <input type="color" class="colorPicker" th:value="${fiche.Maintenance.CouleurMaintenanceType}">
                                            <input type="hidden" id="titlehidden" class="titlehidden"
                                                th:field="*{maintenance.CouleurMaintenanceType}" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <section>
                                                <div class="titre">Icone</div>
                                                <div
                                                    th:replace="fragments/intervenant_fragment.html::scrollcards(field='MaintenanceType')">
                                            </section>
                                        </div>
                                        <input type="hidden" id="imageHiddenMaintenanceType"
                                            class="imageHiddenMaintenanceType"
                                            th:field="*{Maintenance.imageTypeMaintenanceUrl}"
                                            value="/images/eleve.png" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>





                    <div id="newMaintenanceType"
                        th:each="type : ${maintenanceList}">
                        <div class="media form-check">
                            <input class="form-check-input" type="radio" name="maintenanceType" th:value="${type}"
                                th:id="${'radio-' + type.name()}" th:field="*{maintenance.maintenanceType}" />
                            <img class="align-self-start mr-3 logo"
                                th:src="${'/images/' + type.name().toLowerCase() + '.png'}"
                                th:alt="${'/images/' + type.name().toLowerCase() + '.png'}">
                            <label th:for="${'radio-' + type.name()}"></label>
                        </div>
                    </div>
                </div>



            </div>

            <!--------------------------Travaux réalisés--------------------------------------->
            <hr />

            <legend>
                <div class="row align-items-center">
                    <div
                    th:replace="fragments/titreFiche.html :: legend(policeDis=${fiche.policeDisTravauxRealises}, couleur=${fiche.couleurTravauxRealises},champ='TravauxRealises', titre='Travaux Réalisés')">
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="collapse multi-collapse" id="imageNiveauTravauxRealises">
                                <div class="card card-body">
                                    <div class="row">
                                        <div th:replace="fragments/titreFiche.html :: colNiveauTitre(champ='TravauxRealises',field='niveauTravauxRealises')">
                                        </div>
                                        <input type="hidden" id="niveauTitreHiddenTravauxRealises"
                                                        name="niveauTitreHiddenTravauxRealises"
                                                        th:field="${fiche.NiveauTravauxRealises}" />
                                        <div class="col">
                                            <div class="titre">Couleur Texte</div>
                                            <input type="color" class="colorPicker" th:value="${fiche.couleurTravauxRealises}">
                                            <input type="hidden" id="titlehidden" class="titlehidden"
                                                th:field="*{couleurTravauxRealises}" />
                                        </div>
                                        <div class="col">
                                            <div class="titre">Dislexique</div>
                                            <input class="form-check-input" type="checkbox" th:checked="${fiche.policeDisTravauxRealises}" th:field="*{policeDisTravauxRealises}">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <section>
                                                <div class="titre">Icone</div>
                                                <div class="row">
                                                    <div class="scrollcards">
                                                        <div class="card"
                                                            th:each="imageTitre, stat : ${imagesTitreTravauxRealises}">
                                                            <input class="form-check-input" type="radio"
                                                                name="selectedImageTravauxRealises"
                                                                th:id="${imageTitre.nomImage}"
                                                                th:value="${imageTitre.nomImage}"
                                                                th:checked="${stat.first}"
                                                                onchange="actualiserImageTitre('TravauxRealises')">
                                                            <label class="form-check-label"
                                                                th:for="${imageTitre.nomImage}">
                                                                <img class="imageSlider"
                                                                    th:src="@{'/' + ${imageTitre.imageUrl}}"
                                                                    alt="Image Titre" oncontextmenu="return false;"
                                                                    draggable="false" />
                                                                <div class="text-wrap" style="width: min-content;">
                                                                    <h6 th:text="${imageTitre.nomImage}"></h6>
                                                                </div>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <input type="hidden" id="imageHiddenTravauxRealises"
                                                    class="imageHiddenTravauxRealises"
                                                    th:field="*{imageTitreTravauxRealisesUrl}" />
                                            </section>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <textarea rows="10" id="newTravauxRealises" class="form-control" name="newTravauxRealises"
                            onkeydown="handleDescriptionKeyDown(event)" th:text="${fiche.travauxRealises}" disabled></textarea>
                    </div>
                </div>
            </legend>

            <!--------------------------Travaux NON réalisés--------------------------------------->
            <hr />
            <legend>
                <div class="row align-items-center">
                    <div
                    th:replace="fragments/titreFiche.html :: legend(policeDis=${fiche.policeDisTravauxNonRealises}, couleur=${fiche.couleurTravauxNonRealises},champ='TravauxNonRealises', titre='Travaux Non Réalisés')">
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="collapse multi-collapse" id="imageNiveauTravauxNonRealises">
                                <div class="card card-body">
                                    <div class="row">

                                        <div th:replace="fragments/titreFiche.html :: colNiveauTitre(champ='TravauxNonRealises',field='niveauTravauxNonRealises')">
                                        </div>
                                        <input type="text" id="niveauTitreHiddenTravauxNonRealises"
                                                        name="niveauTitreHiddenTravauxNonRealises"
                                                        th:field="${fiche.NiveauTravauxNonRealises}" />


                                        <div class="col">
                                            <div class="titre">Couleur Texte</div>
                                            <input type="color" class="colorPicker" th:value="${fiche.couleurTravauxNonRealises}">
                                            <input type="hidden" id="titlehidden" class="titlehidden"
                                                th:field="*{couleurTravauxNonRealises}" />
                                        </div>
                                        <div class="col">
                                            <div class="titre">Dislexique</div>
                                            <input class="form-check-input" type="checkbox" th:checked="${fiche.policeDisTravauxNonRealises}" th:field="*{policeDisTravauxNonRealises}">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <section>
                                                <div class="titre">Icone</div>
                                                <div class="row">
                                                    <div class="scrollcards">
                                                        <div class="card"
                                                            th:each="imageTitre, stat : ${imagesTitreTravauxNonRealises}">
                                                            <input class="form-check-input" type="radio"
                                                                name="selectedImageTravauxNonRealises"
                                                                th:id="${imageTitre.nomImage}"
                                                                th:value="${imageTitre.nomImage}"
                                                                th:checked="${stat.first}"
                                                                onchange="actualiserImageTitre('TravauxNonRealises')">
                                                            <label class="form-check-label"
                                                                th:for="${imageTitre.nomImage}">
                                                                <img class="imageSlider"
                                                                    th:src="@{'/' + ${imageTitre.imageUrl}}"
                                                                    alt="Image Titre" oncontextmenu="return false;"
                                                                    draggable="false" />
                                                                <div class="text-wrap" style="width: min-content;">
                                                                    <h6 th:text="${imageTitre.nomImage}"></h6>
                                                                </div>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <input type="hidden" id="imageHiddenTravauxNonRealises"
                                                    class="imageHiddenTravauxNonRealises"
                                                    th:field="*{imageTitreTravauxNonRealisesUrl}" />
                                            </section>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <textarea rows="10" id="newTravauxNonRealises" class="form-control" name="newTravauxNonRealises"
                            onkeydown="handleDescriptionKeyDown(event)" th:text="${fiche.travauxNonRealises}" disabled></textarea>
                    </div>
                </div>
            </legend>

            <!--------------------------Matériaux--------------------------------------->
            <hr />
            <legend>
                <div class="row align-items-center">
                    <div
                    th:replace="fragments/titreFiche.html :: legend(policeDis=${fiche.policeDisMateriauxUtilises}, couleur=${fiche.couleurMateriauxUtilises},champ='MateriauxUtilises', titre='Matériaux Utilisés')">
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="collapse multi-collapse" id="imageNiveauMateriauxUtilises">
                                <div class="card card-body">
                                    <div class="row">
                                        <div
                                    th:replace="fragments/titreFiche.html :: colNiveauTitre(champ='MateriauxUtilises',field='niveauMateriauxUtilises')">
                                </div>
                                <input type="hidden" id="niveauTitreHiddenMateriauxUtilises"
                                                        name="niveauTitreHiddenMateriauxUtilises"
                                                        th:field="${fiche.NiveauMateriauxUtilises}" />
                                        <div class="col">
                                            <div class="titre">Couleur</div>
                                            <input type="color" class="colorPicker" th:value="${fiche.couleurMateriauxUtilises}">
                                            <input type="hidden" id="titlehidden" class="titlehidden"
                                                th:field="*{couleurMateriauxUtilises}" />
                                        </div>
                                        <div class="col">
                                            <div class="titre">Dislexique</div>
                                            <input class="form-check-input" type="checkbox" th:checked="${fiche.policeDisMateriauxUtilises}" th:field="*{policeDisMateriauxUtilises}">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <section>
                                                <div class="titre">Icone</div>
                                                <div class="row">
                                                    <div class="scrollcards">
                                                        <div class="card"
                                                            th:each="imageTitre, stat : ${imagesTitreMateriauxUtilises}">
                                                            <input class="form-check-input" type="radio"
                                                                name="selectedImageMateriauxUtilises"
                                                                th:id="${imageTitre.nomImage}"
                                                                th:value="${imageTitre.nomImage}"
                                                                th:checked="${stat.first}"
                                                                onchange="actualiserImageTitre('MateriauxUtilises')">
                                                            <label class="form-check-label"
                                                                th:for="${imageTitre.nomImage}">
                                                                <img class="imageSlider"
                                                                    th:src="@{'/' + ${imageTitre.imageUrl}}"
                                                                    alt="Image Titre" oncontextmenu="return false;"
                                                                    draggable="false" />
                                                                <div class="text-wrap" style="width: min-content;">
                                                                    <h6 th:text="${imageTitre.nomImage}"></h6>
                                                                </div>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <input type="hidden" id="imageHiddenMateriauxUtilises"
                                                    class="imageHiddenMateriauxUtilises"
                                                    th:field="*{imageTitreMateriauxUtilisesUrl}" />
                                            </section>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="materiaux_vertical">

                            <div class="noPrint"></div>
                            <div class="container">
                                <div class="row">
                                    <th:block th:each="sectionNumber : ${#numbers.sequence(0,5)}">
                                        <div class="col-6 col-sm-6 col-lg-4 mb-4 flex-fill ">
                                            <div id="case"
                                                style="border: 2px solid #212529;border-radius: 0.4rem; height: 100%;">
                                                <button type="button" class="btn btn-dark btn-sm" style="width: 100%;">
                                                    Selectionner le matériau
                                                </button>
                                                <div class="w-100"></div>
                                                <img alt="image selectionnée"
                                                    style="max-height: 15vh; max-width: 80vw; width: 100%; object-fit: contain;margin: 1rem;height: inherit;"
                                                    class="rounded mx-auto d-block"  />
                                                <div class="w-100"></div>
                                                <input type="text" class="form-control mx-auto d-block"
                                                    aria-describedby="basic-addon2">
                                            </div>
                                        </div>
                                </div>
                                </th:block>
                            </div>
                        </div>
                    </div>

                </div>

            </legend>

            <div class="submit-container"
                style="height: 10vh;width: 100%;margin-bottom: calc(var(--bs-gutter-x) * .5);">
                <button class="btn btn-dark" type="submit" style="height: inherit;width: inherit;">Terminer</button>
            </div>



        </form>
        </main>

    </div>
</body>
<script>

    


    function actualiserImageTitre(suffixe) {
        // Récupérer l'image sélectionnée
        var selectedImage = document.querySelector('input[name="selectedImage' + suffixe + '"]:checked');
        if (!selectedImage) {
            console.log('input[name="selectedImage' + suffixe + '"]:checked n existe pas');
        }
        var imagehidden = document.getElementById('imageHidden' + suffixe);
        if (!imagehidden) {
            console.log('imageHidden' + suffixe + ' n existe pas');
        }
        if (selectedImage) {
            var selectedImageLabel = document.querySelector('label[for="' + selectedImage.id + '"]');
            var selectedImageSrc = selectedImageLabel.querySelector('img').getAttribute('src');

            // Remplacer l'image ImageAAfficherOuNonSuffixe
            var imageAAfficherOuNonIntervenant = document.getElementById('ImageAAfficherOuNon' + suffixe);
            if (!imageAAfficherOuNonIntervenant) {
                console.log('ImageAAfficherOuNon' + suffixe + ' n existe pas dommage');
            }
            imageAAfficherOuNonIntervenant.src = selectedImageSrc;
            imagehidden.value = selectedImageSrc;
        }
    }

    //TODO : mixer avec les autres titres
    //seulement utilisé pour les prenom et nom de l'intervenant
    function updateHiddenNiveau(suffixe) {
        var selectTitreIcTxt = document.getElementById('fragmentNiveauTitre' + suffixe); //fragmentNiveauTitre n existe pas, inutile
        if (!selectTitreIcTxt) {
            console.log('fragmentNiveauTitre' + suffixe + ' n existe pas');
        }
        var niveau = selectTitreIcTxt.value;
        if (niveau == null) {
            console.log('niveau est null');
        }
        var imageIcon = document.getElementById('ImageAAfficherOuNon' + suffixe);
        if (!imageIcon) {
            console.log('ImageAAfficherOuNon' + suffixe + ' n existe pas');
        }
        var titreSection = document.getElementById('TitreSAAfficherOuNon' + suffixe);
        if (!titreSection) {
            console.log('TitreSAAfficherOuNon' + suffixe + ' n existe pas');
        }
        var niveauTitre = document.getElementById('niveauTitreHidden' + suffixe);
        if (!niveauTitre) {
            console.log('niveauTitreHidden' + suffixe + ' n existe pas');
        }
        switch (niveau) {
            case '0':
                imageIcon.style.display = 'block';
                titreSection.style.display = 'none';
                niveauTitre.value = '0';
                break;
            case '1':
                imageIcon.style.display = 'block';
                titreSection.style.display = 'block';
                niveauTitre.value = '1';
                break;
            case '2':
                imageIcon.style.display = 'none';
                titreSection.style.display = 'block';
                niveauTitre.value = '2';
                break;
        }
    }


    function updateTitre(prefix) {
        var selectTitreIcTxt = document.getElementById('niveau' + prefix);
        if (!selectTitreIcTxt){
            console.log('1) niveau' + prefix + ' n existe pas');
        }
        var niveau = selectTitreIcTxt.value;
        if (niveau == null) {
            console.log('2) niveau est null');
        }
        var imageIcon = document.getElementById('ImageAAfficherOuNon' + prefix);
        if (!imageIcon) {
            console.log('3) ImageAAfficherOuNon' + prefix +' n existe pas');
        }
        var titreSection = document.getElementById('TitreSAAfficherOuNon' + prefix);
        if (!titreSection) {
            console.log('4) TitreSAAfficherOuNon' + prefix + ' n existe pas');
        }
        var niveauTitre = document.getElementById('niveauTitreHidden' + prefix);
        if (!niveauTitre) {
            console.log('5) niveauTitreHidden' + prefix + ' n existe pas');
        }

        switch (niveau) {
            case '0':
                imageIcon.style.display = 'block';
                titreSection.style.display = 'none';
                niveauTitre.value = '0';
                break;
            case '1':
                imageIcon.style.display = 'block';
                titreSection.style.display = 'block';
                niveauTitre.value = '1';
                break;
            case '2':
                imageIcon.style.display = 'none';
                titreSection.style.display = 'block';
                niveauTitre.value = '2';
                break;
            case '4':
                imageIcon.style.display = 'none';
                titreSection.style.display = 'block';
                titreSection.style.textDecoration = 'line-through';
                niveauTitre.value = '4';
                break;
        }
    }


    function updateTitreMateriaux(){
        // On récupère le suffixe depuis l'élément select
        var selectElement = event.target;
        var suffixe = selectElement.getAttribute('data-champ');
        
        // On mets à jour les images des titres
        var imageMateriauxUtilises = document.getElementById('ImageAAfficherOuNon' + suffixe);
        if (!imageMateriauxUtilises) {
            console.log('ImageAAfficherOuNon' + suffixe + ' n existe pas');
        }
        var titreMateriauxUtilises = document.getElementById('TitreSAAfficherOuNon' + suffixe);
        if (!titreMateriauxUtilises) {
            console.log('TitreSAAfficherOuNon' + suffixe + ' n existe pas');
        }
        var niveauTitreMateriauxUtilises = document.getElementById('niveau' + suffixe);
        if (!niveauTitreMateriauxUtilises) {
            console.log('niveau' + suffixe + ' n existe pas');
        }
        if (niveauTitreMateriauxUtilises.value == '0') {
            imageMateriauxUtilises.style.display = 'block';
            titreMateriauxUtilises.style.display = 'none';
        } else if (niveauTitreMateriauxUtilises.value == '1') {
            imageMateriauxUtilises.style.display = 'block';
            titreMateriauxUtilises.style.display = 'block';
            titreMateriauxUtilises.style.textDecoration = 'none';
        } else if (niveauTitreMateriauxUtilises.value == '2') {
            imageMateriauxUtilises.style.display = 'none';
            titreMateriauxUtilises.style.display = 'block';
            titreMateriauxUtilises.style.textDecoration = 'none';
        } else if (niveauTitreMateriauxUtilises.value == '4') {
            imageMateriauxUtilises.style.display = 'none';
            titreMateriauxUtilises.style.display = 'block';
            //on barre le titre
            titreMateriauxUtilises.style.textDecoration = 'line-through';
        }
    }
    



    document.addEventListener('DOMContentLoaded', function () {

        
        updateTitre('TravauxRealises');
        updateTitre('TravauxNonRealises');
        updateTitre('MateriauxUtilises');
        updateTitre('MaintenanceType');
        updateTitre('InterventionType');
        updateTitre('InterventionDuree');
        updateTitre('InterventionDate');
        updateTitre('TitreIntervention');
        updateTitre('DemandeDescription');
        updateTitre('DemandeLocalisation');
        updateTitre('DemandeDate');
        updateTitre('DemandeDegreUrgence');
        updateTitre('DemandeNom');
        updateTitre('TitreDemande');
        updateTitre('TitreIntervenantNom');
        updateTitre('TitreIntervenantPrenom');
        updateTitre('TitreIntervenant');





        var colorPickers = Array.from(document.getElementsByClassName('colorPicker'));
        var titlehiddens = Array.from(document.getElementsByClassName('titlehidden'));
        var titresSection = Array.from(document.getElementsByClassName('TitreSection'));

        colorPickers.forEach((colorPicker, index) => {
            colorPicker.addEventListener('change', function () {
                titlehiddens[index].value = this.value;
                titresSection[index].style.color = this.value;
            });
        });

        //On check la premiere image de chaque section
        actualiserImageTitre('TitreIntervenant');
        actualiserImageTitre('TitreDemande');
        actualiserImageTitre('TitreIntervention');
        //actualiserImageTitre('Materiaux');
        actualiserImageTitre('TravauxRealises');
        actualiserImageTitre('TravauxNonRealises');
        actualiserImageTitre('MateriauxUtilises')
        actualiserImageTitre('TitreIntervenantPrenom')
        actualiserImageTitre('TitreIntervenantNom')
        actualiserImageTitre('DemandeNom')
        actualiserImageTitre('DemandeDegreUrgence')
        actualiserImageTitre('DemandeDate')
        actualiserImageTitre('DemandeLocalisation')
        actualiserImageTitre('DemandeDescription')
        actualiserImageTitre('InterventionDate')
        actualiserImageTitre('InterventionDuree')
        actualiserImageTitre('InterventionType')
        actualiserImageTitre('MaintenanceType')

        




    });

    // Add this script to format all date inputs when the page is loaded
    document.addEventListener('DOMContentLoaded', function () {
        const dateInputs = document.querySelectorAll('input[type="date"]');
        dateInputs.forEach(function (input) {
            input.value = formatDate(input.value);
        });
    });

    // Function to format date as dd/MM/yyyy
    function formatDate(dateString) {
        const date = new Date(dateString);
        const day = date.getDate().toString().padStart(2, '0');
        const month = (date.getMonth() + 1).toString().padStart(2, '0');
        const year = date.getFullYear();
        return `${day}/${month}/${year}`;
    }
</script>


</html>